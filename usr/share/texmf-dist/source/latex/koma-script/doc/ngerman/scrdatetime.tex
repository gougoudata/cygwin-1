% ======================================================================
% scrdatetime.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% This file is part of the LaTeX2e KOMA-Script bundle.
%
% This work may be distributed and/or modified under the conditions of
% the LaTeX Project Public License, version 1.3c of the license.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX 
% version 2005/12/01 or later and of this work.
%
% This work has the LPPL maintenance status "author-maintained".
%
% The Current Maintainer and author of this work is Markus Kohm.
%
% This work consists of all files listed in manifest.txt.
% ----------------------------------------------------------------------
% scrdatetime.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% Dieses Werk darf nach den Bedingungen der LaTeX Project Public Lizenz,
% Version 1.3c, verteilt und/oder veraendert werden.
% Die neuste Version dieser Lizenz ist
%   http://www.latex-project.org/lppl.txt
% und Version 1.3c ist Teil aller Verteilungen von LaTeX
% Version 2005/12/01 oder spaeter und dieses Werks.
%
% Dieses Werk hat den LPPL-Verwaltungs-Status "author-maintained"
% (allein durch den Autor verwaltet).
%
% Der Aktuelle Verwalter und Autor dieses Werkes ist Markus Kohm.
% 
% Dieses Werk besteht aus den in manifest.txt aufgefuehrten Dateien.
% ======================================================================
%
% Chapter about scrpage2 of the KOMA-Script guide
% Maintained by Markus Kohm
%
% ----------------------------------------------------------------------
%
% Kapitel über scrpage2 in der KOMA-Script-Anleitung
% Verwaltet von Markus Kohm
%
% ======================================================================

\ProvidesFile{scrdatetime.tex}[{2012/02/23 KOMA-Script guide (chapter:
  scrdate, scrtime)}]

\chapter{Wochentag und Uhrzeit mit \Package{scrdate} und \Package{scrtime}}
\labelbase{datetime}

Zu \KOMAScript{} gehören auch zwei Pakete, um den Umgang mit
Datum\Index{Datum} und Zeit\Index{Zeit} über die beiden Standardbefehle
\Macro{today} und \Macro{date} hinaus zu erweitern. Ebenso wie die anderen
Pakete aus {\KOMAScript} können diese Pakete auch mit den Standardklassen
verwendet werden.

Ab \KOMAScript~3.05a\ChangedAt{v3.05a}{\Package{scrdate}\and\Package{scrtime}}
verwenden diese Pakete die gemeinsame Versionsnummerierung von
\KOMAScript{}. Begründet ist dies darin, dass sie auf eine bestimmte Version
von \Package{scrkbase} und \Package{scrbase} angewiesen sind.


\section{Der Wochentag mit \Package{scrdate}}
\label{sec:datetime.scrdate}
\BeginIndex{Package}{scrdate}

Mit Version~3.05a wurde der Funktionsumfang dieses Pakets erheblich
erweitert. Neben dem aktuellen Wochentag\Index{Wochentag} kann dieses Paket
nun den Wochentag jedes beliebigen Datums nach dem Gregorianischen Kalender
bestimmen.

\BeginIndex{Cmd}{CenturyPart}%
\BeginIndex{Cmd}{DecadePart}%
\begin{Declaration}
  \Macro{CenturyPart}\Parameter{Jahr}\\%
  \Macro{DecadePart}\Parameter{Jahr}%
\end{Declaration}%
Die\ChangedAt{v3.05a}{\Package{scrdate}} Anweisung \Macro{CenturyPart} ergibt
den Wert der Jahrhundert-Stellen eines Jahres. Die Anweisung
\Macro{DecadePart} ergibt hingegen den Wert der übrigen Stellen, also der
Einer und Zehner. Dabei darf die Jahreszahl beliebig viele Stellen aufweisen.
Der Wert kann direkt zur Zuweisung an einen Zähler oder für Berechnungen mit
Hilfe von \Macro{numexpr}\IndexCmd{numexpr} verwendet werden. Für die Ausgabe
als arabische Zahl ist \Macro{the}\IndexCmd{the} voran zu stellen.

\begin{Example}
  Sie wollen berechnen, in welchem Jahrhundert das aktuelle Jahr liegt und
  dies ausgeben.
\begin{lstcode}
  Das Jahr \the\year\ ist das Jahr 
  \the\DecadePart{\year} des 
  \the\numexpr \CenturyPart{\year}+1\relax. 
  Jahrhunderts.
\end{lstcode}
  Als Ergebnis erhalten Sie:
  \begin{quote}
    Das Jahr \the\year\ ist das Jahr \the\DecadePart{\year} des \the\numexpr
    \CenturyPart{\year}+1\relax.  Jahrhunderts.
  \end{quote}
\end{Example}%

Bitte\textnote{Achtung!} beachten Sie, dass hier die Zählweise verwendet
wird, bei der das Jahr 2000 das Jahr~0 -- also das erste Jahr -- des
21.~Jahrhunderts ist.%
\EndIndex{Cmd}{DecadePart}%
\EndIndex{Cmd}{CenturyPart}%

\BeginIndex{Cmd}{DayNumber}%
\BeginIndex{Cmd}{ISODayNumber}%
\begin{Declaration}
  \Macro{DayNumber}\Parameter{Jahr}\Parameter{Monat}\Parameter{Tag}\\%
  \Macro{ISODayNumber}\Parameter{ISO-Datum}%
\end{Declaration}%
Diese\ChangedAt{v3.05a}{\Package{scrdate}} beiden Anweisungen geben den Wert
der Nummer des Wochentags\Index{Wochentag} zu einem Datum zurück. Sie
unterscheiden sich nur in der Art der Angabe des Datums. Während bei
\Macro{DayNumber} Jahr, Monat und Tag des gewünschten Datums eigene Parameter
sind, wird bei \Macro{ISODayNumber} das Datum in ISO-Schreibweise,
\PName{Jahr}\texttt{-}\PName{Monat}\texttt{-}\PName{Tag} angegeben. Dabei
spielt es keine Rolle, ob Monat und Tag ein- oder zweistellig angegeben
werden. Der Wert kann direkt zur Zuweisung an einen Zähler oder für
Berechnungen mit Hilfe von \Macro{numexpr}\IndexCmd{numexpr} verwendet
werden. Für die Ausgabe als arabische Zahl ist \Macro{the}\IndexCmd{the} voran
zu stellen.

\begin{Example}
  Sie wollen die Nummer des Wochentags des 1.~Mai~2027 wissen.
\begin{lstcode}
  Der 1.~Mai~2027 hat die Wochentagsnummer 
  \the\ISODayNumber{2027-5-1}.
\end{lstcode}
  Als Ergebnis erhalten Sie:
  \begin{quote}
    Der 1.~Mai~2027 hat die Wochentagsnummer 
    \the\ISODayNumber{2027-5-1}.
  \end{quote}
\end{Example}

Als Besonderheit ist es sogar möglich, von einem vorgegebenen Datum eine
gewünschte Anzahl an Tagen in die Zukunft oder Vergangenheit zu gehen.
\begin{Example}
  Sie wollen die Nummer des Wochentags wissen, den wir in 12~Tagen haben und
  den wir 24~Tage vor dem 24.~Dezember~2027 gehabt haben werden.
\begin{lstcode}
  In 12~Tagen haben wir die Wochentagsnummer
  \the\DayNumber{\year}{\month}{\day+12} und
  24~Tage vor dem 24.~Dezember~2027 wird es
  die Nummer \the\ISODayNumber{2027-12-24-24}
  gewesen sein.
\end{lstcode}
  Als Ergebnis erhalten Sie beispielsweise:
  \begin{quote}
  In 12~Tagen haben wir die Wochentagsnummer
  \the\DayNumber{\year}{\month}{\day+12} und
  24~Tage vor dem 24.~Dezember~2027 wird es
  die Nummer \the\ISODayNumber{2027-12-24-24}
  gewesen sein.
  \end{quote}
\end{Example}

Die Wochentage werden dabei wie folgt nummeriert: Sonntag\,=\,0, Montag\,=\,1,
Dienstag\,=\,2, Mittwoch\,=\,3, Donnerstag\,=\,4, Freitag\,=\,5 und
Samstag\,=\,6.%
%
\EndIndex{Cmd}{DayNumber}%
\EndIndex{Cmd}{ISODayNumber}%


\BeginIndex{Cmd}{DayNameByNumber}%
\BeginIndex{Cmd}{DayName}%
\BeginIndex{Cmd}{ISODayName}%
\begin{Declaration}
  \Macro{DayNameByNumber}\Parameter{Wochentagsnummer}\\%
  \Macro{DayName}\Parameter{Jahr}\Parameter{Monat}\Parameter{Tag}\\%
  \Macro{ISODayName}\Parameter{ISO-Datum}%
\end{Declaration}%
Üblicherweise\ChangedAt{v3.05a}{\Package{scrdate}} ist man weniger an der
Nummer eines Wochentags als dem Namen des Wochentags interessiert. Daher
liefert die Anweisung \Macro{DayNameByNumber} den Namen des Wochentags zu
einer Wochentagsnummer zurück, die man beispielsweise mit einer der beiden
zuvor erklärten Anweisungen \Macro{DayNumber} oder \Macro{ISODayNumber}
bestimmt hat. Die beiden Anweisungen \Macro{DayName} und \Macro{ISODayName}
liefern entsprechend den Wochentag zu einem bestimmten Datum.

\begin{Example}
   Sie wollen den Wochentag des 24.~Dezembers~2027 wissen.
\begin{lstcode}
  Bitte zahlen Sie bis zum \ISODayName{2027-12-24}, 
  den 24.\,12.~2027, die Summe von \dots
\end{lstcode}
  Als Ergebnis erhalten Sie:
  \begin{quote}
  Bitte zahlen Sie bis zum 
  \ISODayName{2027-12-24}, den 
  24.\,12.~2027, die Summe von \dots
  \end{quote}
\end{Example}
 
Als Besonderheit ist es auch hier möglich, in gewissem Umfang Berechnungen
anzustellen:
\begin{Example}
  Sie wollen den Wochentag wissen, den wir in 12~Tagen haben und
  den wir 24~Tage vor dem 24.~Dezember~2027 hatten.
\begin{lstcode}
  In 12~Tagen haben wir einen 
  \DayName{\year}{\month}{\day+12} und
  24~Tage vor dem 24.~Dezember~2027 ist ein
  \ISODayName{2027-12-24-24}, während zwei Wochen 
  und drei Tage nach einem Mittwoch ein 
  \DayNameByNumber{3+2*7+3} folgt.
\end{lstcode}
  Als Ergebnis erhalten Sie beispielsweise:
  \begin{quote}
  In 12~Tagen haben wir einen 
  \DayName{\year}{\month}{\day+12} und
  24~Tage vor dem 24.~Dezember~2027 ist ein
  \ISODayName{2027-12-24-24}, während
  zwei Wochen und drei Tage nach
  einem Mittwoch ein \DayNameByNumber{3+2*7+3}
  folgt.
  \end{quote}
\end{Example}%
%
\EndIndex{Cmd}{ISODayName}%
\EndIndex{Cmd}{DayName}%
\EndIndex{Cmd}{DayNameByNumber}%


\BeginIndex{Cmd}{todaysname}%
\BeginIndex{Cmd}{todaysnumber}%
\BeginIndex{Cmd}{ISOToday}%
\BeginIndex{Cmd}{IsoToday}%
\begin{Declaration}
  \Macro{ISOToday}\\%
  \Macro{IsoToday}\\
  \Macro{todaysname}\\%
  \Macro{todaysnumber}
\end{Declaration}%
In den bisherigen Beispielen dieses Abschnitts wurde das aktuelle Datum immer
recht umständlich über die \TeX-Register \Macro{year}\IndexCmd{year},
\Macro{month}\IndexCmd{month}, \Macro{day}\IndexCmd{day} bestimmt. Die
Anweisungen \Macro{ISOToday}\ChangedAt{v3.05a}{\Package{scrdate}} und
\Macro{IsoToday} liefern direkt das aktuelle Datum in ISO-Schreibweise. Sie
unterscheiden sich lediglich darin, dass \Macro{ISOToday} Monat und Tag immer
zweistellig ausgibt, während \Macro{IsoToday} Monat und Tag bei Werten kleiner
10 einstellig ausgibt. Die Anweisung \Macro{todaysname} bietet direkt den
aktuellen Wochentag, während \Macro{todaysnumber} den Wert des aktuellen
Wochentags liefert. Näheres zur Verwendung dieses Wertes ist den obigen
Erklärungen zu den Anweisungen \Macro{DayNumber} und \Macro{ISODayNumber} zu
entnehmen.

\begin{Example}
  Ich will Ihnen zeigen, an was für einem Wochentag dieses Dokument gesetzt
  wurde. Dazu schreibe ich:
\begin{lstcode}
  Dieses Dokument entstand an einem \todaysname.
\end{lstcode}
  Das Ergebnis lautet:
  \begin{quote}
  Dieses Dokument entstand an einem \todaysname.
  \end{quote}
\end{Example}

\begin{Explain}
  Wenn\textnote{Tipp!} Sie den Namen des Tages in Kleinbuchstaben benötigen,
  weil das in der entsprechenden Sprache innerhalb des Satzes so üblich ist,
  können Sie das erreichen, obwohl die Namen der Wochentage in
  \Package{scrdate} alle groß geschrieben sind. Greifen Sie mit
  % Umbruchkorrektur: listings
\begin{lstcode}[belowskip=\dp\strutbox]
  \MakeLowercase{\todaysname}
\end{lstcode}
  einfach auf die \LaTeX-Anweisung
  \Macro{MakeLowercase}\IndexCmd{MakeLowercase}%
  \important{\Macro{MakeLowercase}} zurück. Diese wandelt ihr Argument
  komplett in Kleinbuchstaben. Natürlich funktioniert dieser Tipp auch für
  obige Anweisungen \Macro{DayNameByNumber}\IndexCmd{DayNameByNumber},
  \Macro{DayName}\IndexCmd{DayName} und
  \Macro{ISODayName}\IndexCmd{ISODayName}.%
\end{Explain}%
\EndIndex{Cmd}{IsoToday}%
\EndIndex{Cmd}{ISOToday}%
\EndIndex{Cmd}{todaysnumber}%
\EndIndex{Cmd}{todaysname}


\BeginIndex{Cmd}{nameday}%
\begin{Declaration}
  \Macro{nameday}\Parameter{Name}
\end{Declaration}%
So wie mit \Macro{date}\IndexCmd{date} die Ausgabe von \Macro{today}
direkt geändert werden kann, setzt \Macro{nameday} die Ausgabe von
\Macro{todaysname} auf den Wert \PName{Name}.
\begin{Example}
  Sie setzen mit \Macro{date} das aktuelle Datum auf einen festen
  Wert. Für die Ausgabe des zugehörigen Wochentags interessiert es nur,
  dass dieser Tag ein Werktag war. Daher schreiben Sie
\begin{lstcode}
  \nameday{Werktag}
\end{lstcode}
  und erhalten so mit dem Satz aus dem vorherigen Beispiel zu
  \Macro{todaysname}:
  \begin{quote}\nameday{Werktag}
    Dieses Dokument entstand an einem {\todaysname}.
  \end{quote}
\end{Example}
Für \Macro{ISOToday}\IndexCmd{ISOToday} und
\Macro{IsoToday}\IndexCmd{IsoToday} existieren keine entsprechenden
Anweisungen.%
\EndIndex{Cmd}{nameday}


\minisec{Wochentage in unterschiedlichen Sprachen}%
Das \Package{scrdate}-Paket beherrscht derzeit die Sprachen Englisch (english
und USenglish), Deutsch (german, ngerman,
austrian\ChangedAt{v3.08b}{\Package{scrdate}} und naustrian), Französisch
(french), Italienisch (italian), Spanisch (spanish), Kroatisch (croatian),
Finnisch (finnish), Norwegisch (norsk), Schwedisch (swedish) und Dänisch
(danish), kann aber auch für andere Sprachen konfiguriert werden. Näheres dazu
entnehme man \File{scrdate.dtx}.

Bei der aktuellen Version ist es egal, ob \Package{scrdate} vor oder nach
\Package{ngerman}\IndexPackage{ngerman}, \Package{babel}\IndexPackage{babel}
oder ähnlichen Paketen geladen wird, in jedem Falle wird die korrekte Sprache
gewählt.

\begin{Explain}
  Etwas genauer ausgedrückt: Solange die Sprachauswahl in einer zu
  \Package{babel}\IndexPackage{babel} bzw.
  \Package{german}\IndexPackage{german} kompatiblen Form erfolgt und
  die Sprache \Package{scrdate} bekannt ist, wird die Sprache korrekt
  gewählt. Ist dies nicht der Fall, werden (US-)englische Ausdrücke
  verwendet.
\end{Explain}
\EndIndex{Package}{scrdate}


\section{Die aktuelle Zeit mit \Package{scrtime}}
\label{sec:datetime.scrtime}
\BeginIndex{Package}{scrtime}

Ein anderes Problem ist die Frage nach der aktuellen Zeit. Dieses kann mit
Hilfe des Pakets \Package{scrtime} gelöst werden.


\BeginIndex{Cmd}{thistime}\BeginIndex{Cmd}{thistime*}%
\begin{Declaration}%
  \Macro{thistime}\OParameter{Trennung}\\
  \Macro{thistime*}\OParameter{Trennung}
\end{Declaration}%
\Macro{thistime} liefert die aktuelle Zeit\Index{Zeit} in Stunden und
Minuten. In der Ausgabe wird zwischen den Stunden und Minuten das optionale
Argument \PName{Trennung} gesetzt. Voreingestellt ist das Zeichen
»\PValue{:}«.

\Macro{thistime*} funktioniert fast genau wie \Macro{thistime}. Der
einzige Unterschied besteht darin, dass im Gegensatz zu
\Macro{thistime} bei \Macro{thistime*} die Minutenangaben bei Werten
kleiner 10 nicht durch eine vorangestellte Null auf zwei Stellen
erweitert wird.
\begin{Example}
  Die Zeile
\begin{lstcode}
  Ihr Zug geht um \thistime\ Uhr.
\end{lstcode}
  liefert als Ergebnis beispielsweise eine Zeile wie
  \begin{quote}
    Ihr Zug geht um \thistime\ Uhr.
  \end{quote}
  oder
  \begin{quote}
    Ihr Zug geht um 23:09 Uhr.
  \end{quote}
  \bigskip
  Demgegenüber liefert die Zeile
\begin{lstcode}
  Beim nächsten Ton ist es \thistime*[\ Uhr,\ ] 
  Minuten und 42 Sekunden.
\end{lstcode}
  als mögliches Ergebnis etwas wie:
  \begin{quote}
    Beim nächsten Ton ist es 8\ Uhr,\ 41 Minuten und 42 Sekunden.
  \end{quote}
  oder
  \begin{quote}
    Beim nächsten Ton ist es 23\ Uhr,\ 9 Minuten und 42 Sekunden.
  \end{quote}
\end{Example}
\EndIndex{Cmd}{thistime}\EndIndex{Cmd}{thistime*}


\BeginIndex{Cmd}{settime}%
\begin{Declaration}%
 \Macro{settime}\Parameter{Wert}
\end{Declaration}%
\Macro{settime} setzt die Ausgabe von \Macro{thistime} und
\Macro{thistime*} auf einen festen \PName{Wert}%
%\footnote{Allerdings darf man nicht erwarten, dass nun die Zeit
%  stillsteht!}
. %
Anschließend wird das optionale Argument von \Macro{thistime} bzw.
\Macro{thistime*} ignoriert, da ja die komplette Zeichenkette, die
\Macro{thistime} bzw. \Macro{thistime*} nun liefert, hiermit explizit
festgelegt wurde.%
\EndIndex{Cmd}{settime}


\BeginIndex{Option}{12h~=\PName{Ein-Aus-Wert}}%
\BeginIndex{Option}{24h}%
\begin{Declaration}
  \KOption{12h}\PName{Ein-Aus-Wert}
\end{Declaration}%
Mit der Option \Option{12h}\ChangedAt{v3.05a}{\Package{scrtime}} kann gewählt
werden, ob die Zeit bei \Macro{thistime} und \Macro{thistime*} im 12-Stunden-
oder 24-Stunden-Format ausgegeben werden soll. Als \PName{Ein-Aus-Wert} kann
dabei einer der Standardwerte für einfache Schalter aus
\autoref{tab:truefalseswitch}, \autopageref{tab:truefalseswitch} verwendet
werden. Wird die Option ohne Wert-Angabe verwendet, so wird der Wert
\PValue{true} angenommen, also auf das 12-Stunden-Format geschaltet.
Voreingestellt ist hingegen das 24-Stunden-Format.%
%\footnote{Leider beherrscht das \Package{scrtime}-Paket noch nicht die
%  Sternzeit nach \textsc{StarTrek}\Index{StarTrek}, ein echter
%  Mangel!}

Die Option kann wahlweise als Klassenoption bei \Macro{documentclass}, als
Paketoption bei \Macro{usepackage} oder auch nach dem Laden von
\Package{scrtime} per \Macro{KOMAoptions} oder \Macro{KOMAoption} (siehe
beispielsweise \autoref{sec:typearea.options},
\autopageref{desc:typearea.cmd.KOMAoptions}) gesetzt werden. Sie verliert
jedoch bei einem Aufruf von \Macro{settime} ihre Gültigkeit. Die
Uhrzeit wird nach Verwendung dieser Anweisung nur noch mit dem dort
angegebenen Wert im dort verwendeten Format ausgegeben.

Rein\textnote{Achtung!} aus Gründen der Kompatibilität zu früheren Versionen
von \Package{scrtime} wird bei \Macro{documentclass} und \Macro{usepackage}
auch noch die Option \Option{24h} zur Umschaltung auf das 24-Stunden-Format
unterstützt. Deren Verwendung wird jedoch nicht mehr empfohlen.%
\EndIndex{Option}{12h~=\PName{Ein-Aus-Wert}}%
\EndIndex{Option}{24h}%
%
\EndIndex{Package}{scrtime}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../guide"
%%% End:

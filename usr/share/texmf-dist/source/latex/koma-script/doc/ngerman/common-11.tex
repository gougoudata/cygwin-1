% ======================================================================
% common-11.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% This file is part of the LaTeX2e KOMA-Script bundle.
%
% This work may be distributed and/or modified under the conditions of
% the LaTeX Project Public License, version 1.3c of the license.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX 
% version 2005/12/01 or later and of this work.
%
% This work has the LPPL maintenance status "author-maintained".
%
% The Current Maintainer and author of this work is Markus Kohm.
%
% This work consists of all files listed in manifest.txt.
% ----------------------------------------------------------------------
% common-11.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% Dieses Werk darf nach den Bedingungen der LaTeX Project Public Lizenz,
% Version 1.3c, verteilt und/oder veraendert werden.
% Die neuste Version dieser Lizenz ist
%   http://www.latex-project.org/lppl.txt
% und Version 1.3c ist Teil aller Verteilungen von LaTeX
% Version 2005/12/01 oder spaeter und dieses Werks.
%
% Dieses Werk hat den LPPL-Verwaltungs-Status "author-maintained"
% (allein durch den Autor verwaltet).
%
% Der Aktuelle Verwalter und Autor dieses Werkes ist Markus Kohm.
% 
% Dieses Werk besteht aus den in manifest.txt aufgefuehrten Dateien.
% ======================================================================
%
% Paragraphs that are common for several chapters of the KOMA-Script guide
% Maintained by Markus Kohm
%
% ----------------------------------------------------------------------
%
% Absätze, die mehreren Kapiteln der KOMA-Script-Anleitung gemeinsam sind
% Verwaltet von Markus Kohm
%
% ======================================================================

\ProvidesFile{common-11.tex}[2012/01/01 KOMA-Script guide (common paragraphs)]

\makeatletter
\@ifundefined{ifCommonmaincls}{\newif\ifCommonmaincls}{}%
\@ifundefined{ifCommonscrextend}{\newif\ifCommonscrextend}{}%
\@ifundefined{ifCommonscrlttr}{\newif\ifCommonscrlttr}{}%
\@ifundefined{ifIgnoreThis}{\newif\ifIgnoreThis}{}%
\makeatother


\ifIgnoreThis %+++++++++++++++++++++++++++++++++++++++++++++ nicht maincls +
\else %------------------------------------------------------- nur maincls -
\begin{Declaration}
  \Macro{deffootnote}\OParameter{Markenbreite}\Parameter{Einzug}%
                     \Parameter{Absatzeinzug}\\
                     \hphantom{\Macro{deffootnote}}%
                     \Parameter{Markendefinition}\\
  \Macro{deffootnotemark}\Parameter{Markendefinition}\\
  \Macro{thefootnotemark}
\end{Declaration}%
\BeginIndex{Cmd}{deffootnote}%
\BeginIndex{Cmd}{deffootnotemark}%
\BeginIndex{Cmd}{thefootnotemark}%
Die \KOMAScript-Klassen setzen Fußnoten etwas anders als die Standardklassen.
Die Fußnotenmarkierung im Text, also die Referenzierung der Fußnote, erfolgt
wie bei den Standardklassen durch kleine hochgestellte Zahlen.  Genauso werden
die Markierungen auch in der Fußnote selbst wiedergegeben. Sie werden dabei
rechtsbündig in einem Feld der Breite \PName{Markenbreite} gesetzt. Die erste
Zeile der Fußnote schließt direkt an das Feld der Markierung an.

Alle weiteren Zeilen werden um den Betrag von \PName{Einzug} eingezogen
ausgegeben. Wird der optionale Parameter \PName{Markenbreite} nicht angegeben,
dann entspricht er dem Wert von \PName{Einzug}.  Sollte die Fußnote aus
mehreren Absätzen bestehen, dann wird die erste Zeile eines Absatzes
zusätzlich mit dem Einzug der Größe \PName{Absatzeinzug} versehen.

\autoref{fig:maincls.deffootnote} %
\IfCommon{scrlttr2}{auf \autopageref{fig:maincls.deffootnote} }%
veranschaulicht die verschiedenen Parameter%
\IfCommon{maincls}{ nochmals}%
. Die Voreinstellung in den \KOMAScript-Klassen entspricht folgender
Definition:
% Umbruchkorrektur: listings korrigieren!
\begin{lstcode}[belowskip=\dp\strutbox]
  \deffootnote[1em]{1.5em}{1em}{%
    \textsuperscript{\thefootnotemark}}
\end{lstcode}
Dabei wird mit Hilfe von \Macro{textsuperscript} sowohl die Hochstellung als
auch die Wahl einer kleineren Schrift erreicht. Die Anweisung
\Macro{thefootnotemark} liefert die aktuelle Fußnotenmarke ohne jegliche
Formatierung.%
\IfCommon{scrextend}{ Das Paket \Package{scrextend} überlässt hingegen in der
  Voreinstellung das Setzen der Fußnoten der verwendeten Klasse. Das Laden des
  Pakets allein sollte daher noch zu keinerlei Änderungen bei der Formatierung
  der Fußnoten oder der Fußnotenmarken führen. Zur Übernahme der
  Voreinstellungen der \KOMAScript-Klassen muss man vielmehr obige Einstellung
  selbst vornehmen. Dazu kann obige Code-Zeile beispielsweise unmittelbar nach
  dem Laden von \Package{scrextend} eingefügt werden.}%

\IfCommon{maincls}{%
\begin{figure}
%  \centering
  \KOMAoption{captions}{bottombeside}
  \setcapindent{0pt}%
  \begin{captionbeside}[{Parameter für die Darstellung der
      Fußnoten}]%
    {\label{fig:maincls.deffootnote}\hspace{0pt plus 1ex}%
      \mbox{Parameter} für die Darstellung der Fußnoten}%
    [l]
  \setlength{\unitlength}{1.02mm}
  \begin{picture}(95,22)
    \thinlines
    % frame of following paragraph
    \put(5,0){\line(1,0){90}}
    \put(5,0){\line(0,1){5}}
    \put(10,5){\line(0,1){5}}\put(5,5){\line(1,0){5}}
    \put(95,0){\line(0,1){10}}
    \put(10,10){\line(1,0){85}}
    % frame of first paragraph
    \put(5,11){\line(1,0){90}}
    \put(5,11){\line(0,1){5}}
    \put(15,16){\line(0,1){5}}\put(5,16){\line(1,0){10}}
    \put(95,11){\line(0,1){10}}
    \put(15,21){\line(1,0){80}}
    % box of the footnote mark
    \put(0,16.5){\framebox(14.5,4.5){\mbox{}}}
    % description of paragraphs
    \put(45,16){\makebox(0,0)[l]{\small\textsf{erster Absatz einer Fußnote}}}
    \put(45,5){\makebox(0,0)[l]{\small\textsf{folgender Absatz einer Fußnote}}}
    % help lines
    \thicklines
    \multiput(0,0)(0,3){7}{\line(0,1){2}}
    \multiput(5,0)(0,3){3}{\line(0,1){2}}
    % parameters
    \put(2,7){\vector(1,0){3}}
    \put(5,7){\line(1,0){5}}
    \put(15,7){\vector(-1,0){5}}
    \put(15,7){\makebox(0,0)[l]{\small\PName{Absatzeinzug}}}
    %
    \put(-3,13){\vector(1,0){3}}
    \put(0,13){\line(1,0){5}}
    \put(10,13){\vector(-1,0){5}}
    \put(10,13){\makebox(0,0)[l]{\small\PName{Einzug}}}
    %
    \put(-3,19){\vector(1,0){3}}
    \put(0,19){\line(1,0){14.5}}
    \put(19.5,19){\vector(-1,0){5}}
    \put(19.5,19){\makebox(0,0)[l]{\small\PName{Markenbreite}}}
  \end{picture}
  \end{captionbeside}
\end{figure}}

\BeginIndex{FontElement}{footnote}%
\BeginIndex{FontElement}{footnotelabel}%
Auf\ChangedAt{v2.8q}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} die Fußnote einschließlich der
Markierung findet außerdem die für das Element
\FontElement{footnote}\important{\FontElement{footnote}}
eingestellte Schriftart Anwendung. Die % Umbruchkorrekturvarianten
\IfCommon{maincls}{davon abweichende }%
Schriftart der Markierung kann %
\IfNotCommon{maincls}{jedoch }%
mit Hilfe der Anweisungen \Macro{setkomafont} und \Macro{addtokomafont} (siehe
\autoref{sec:\csname label@base\endcsname.textmarkup},
\autopageref{desc:\csname label@base\endcsname.cmd.setkomafont}) für das
Element \FontElement{footnotelabel}\important{\FontElement{footnotelabel}} %
\IfCommon{scrlttr2}{davon abweichend }%
eingestellt werden. Siehe hierzu auch %
\IfNotCommon{scrextend}{\autoref{tab:\csname
    label@base\endcsname.elementsWithoutText}, \autopageref{tab:\csname
    label@base\endcsname.elementsWithoutText}}%
\IfCommon{scrextend}{\autoref{tab:maincls.elementsWithoutText},
  \autopageref{tab:maincls.elementsWithoutText}}%
. Voreingestellt ist jeweils keine Umschaltung der Schrift.%
\IfCommon{scrextend}{ Die Elemente finden bei scrextend jedoch nur dann
  Anwendung, wenn die Fußnoten mit diesem Paket gesetzt werden, also
  \Macro{deffootnote} verwendet wurde.}%
\EndIndex{FontElement}{footnotelabel}%
\EndIndex{FontElement}{footnote}%

Die Fußnotenmarkierung im Text wird getrennt von der Markierung vor der
Fußnote definiert. Dies geschieht mit der Anweisung
\Macro{deffootnotemark}. Voreingestellt ist hier:
% Umbruchkorrektur: listings korrigieren!
\begin{lstcode}[belowskip=\dp\strutbox]
  \deffootnotemark{\textsuperscript{\thefootnotemark}}
\end{lstcode}
Dabei findet\ChangedAt{v2.8q}{\Class{scrbook}\and \Class{scrreprt}\and
  \Class{scrartcl}} die Schriftart für das Element
\FontElement{footnotereference}\IndexFontElement{footnotereference}%
\important{\FontElement{footnotereference}} Anwendung
(siehe %
\IfNotCommon{scrextend}{\autoref{tab:\csname
    label@base\endcsname.elementsWithoutText}, \autopageref{tab:\csname
    label@base\endcsname.elementsWithoutText}}%
\IfCommon{scrextend}{\autoref{tab:maincls.elementsWithoutText},
  \autopageref{tab:maincls.elementsWithoutText}}%
). Die Markierungen im Text und in der Fußnote selbst sind also identisch. Die
Schriftart kann mit den Anweisungen \Macro{setkomafont} und
\Macro{addtokomafont} (siehe \autoref{sec:\csname
  label@base\endcsname.textmarkup}, \autopageref{desc:\csname
  label@base\endcsname.cmd.setkomafont}) jedoch geändert werden%
\IfCommon{scrextend}{, sobald die Anweisung \Macro{deffootnotemark} verwendet
  wird}%
.

\ifCommonscrlttr\else
\begin{Example}
  \phantomsection\label{desc:maincls.cmd.deffootnote.example}%
  Relativ\textnote{Tipp!} häufig wird gewünscht, dass die Markierung in der
  Fußnote selbst weder hochgestellt noch kleiner gesetzt wird. Dabei soll sie
  aber nicht direkt am Text kleben, sondern geringfügig davor stehen. Dies
  kann zum einen wie folgt erreicht werden:
\begin{lstcode}
  \deffootnote{1em}{1em}{\thefootnotemark\ }
\end{lstcode}
  Die Fußnotenmarkierung und das folgende Leerzeichen wird also
  rechtsbündig in eine Box der Breite 1\Unit{em} gesetzt.  Die folgenden
  Zeilen der Fußnote werden gegenüber dem linken Rand ebenfalls um 1\Unit{em}
  eingezogen.
  
  Eine\textnote{Tipp!} weitere, oft gefragte Formatierung sind linksbündige
  Fußnotenmarkierungen in der Fußnote. Diese können mit folgender Definition
  erhalten werden:
\begin{lstcode}
  \deffootnote{1.5em}{1em}{%
      \makebox[1.5em][l]{\thefootnotemark}}
\end{lstcode}
  
  Sollen jedoch die Fußnoten insgesamt lediglich in einer anderen Schriftart,
  beispielsweise serifenlos gesetzt werden, so ist dies ganz einfach mit Hilfe
  der Anweisungen \Macro{setkomafont} und \Macro{addtokomafont} (siehe
  \autoref{sec:maincls.textmarkup},
  \autopageref{desc:maincls.cmd.setkomafont}) zu lösen:
\begin{lstcode}
  \setkomafont{footnote}{\sffamily}
\end{lstcode}%
\end{Example}%
\IfNotCommon{scrextend}{Wie die Beispiele zeigen, ermöglicht {\KOMAScript} mit
  dieser einfachen Benutzerschnittstelle eine große Vielfalt unterschiedlicher
  Fußnotenformatierungen.}%
\fi%
\IfCommon{scrlttr2}{Beispiele finden Sie in \autoref{sec:maincls.footnotes},
  \autopageref{desc:maincls.cmd.deffootnote}.}%
%
\EndIndex{Cmd}{deffootnote}%
\EndIndex{Cmd}{deffootnotemark}%
\EndIndex{Cmd}{thefootnotemark}%

\begin{Declaration}
  \Macro{setfootnoterule}\OParameter{Höhe}\Parameter{Länge}%
\end{Declaration}%
\BeginIndex{Cmd}{setfootnoterule}%
Üblicherweise\ChangedAt{v3.06}{\Class{scrlttr2}\and \Class{scrbook}\and
  \Class{scrreprt}\and \Class{scrartcl}\and \Package{scrextend}} wird zwischen
dem Textbereich und dem Fußnotenapparat eine Trennlinie gesetzt, die jedoch
normalerweise nicht über die gesamte Breite des Satzspiegels geht. Mit Hilfe
dieser Anweisung kann die genaue Länge und die Höhe oder Dicke der Linie
bestimmt werden. Dabei werden \PName{Höhe} und \PName{Länge} erst beim Setzen
der Linie selbst abhängig von \Macro{normalsize} ausgewertet. Der optionale
Parameter \PName{Höhe} kann komplett entfallen und wird dann nicht
geändert. Ist das Argument \PName{Höhe} oder \PName{Länge} leer, so wird die
jeweilige Größe ebenfalls nicht geändert. Es gibt sowohl beim Setzen als auch
bei Verwendung der Größen für unplausible Werte eine Warnung.

\BeginIndex{FontElement}{footnoterule}%
Die Farbe\ChangedAt{v3.07}{\Class{scrlttr2}\and \Class{scrbook}\and
  \Class{scrreprt}\and \Class{scrartcl}\and \Package{scrextend}} der Linie
kann über das Element
\FontElement{footnoterule}\important{\FontElement{footnoterule}} mit Hilfe der
Anweisungen \Macro{setkomafont} und \Macro{addtokomafont} (siehe
\autoref{sec:\csname label@base\endcsname.textmarkup},
\autopageref{desc:\csname label@base\endcsname.cmd.setkomafont}) eingestellt
werden. Voreingestellt ist hierbei keinerlei Änderung von Schrift oder
Farbe. Um die Farbe ändern zu können, muss außerdem ein Farbpaket wie
\Package{xcolor}\IndexPackage{xcolor}\important{\Package{xcolor}} geladen
sein.%
%
\EndIndex{FontElement}{footnoterule}%
\EndIndex{Cmd}{setfootnoterule}%
\IfNotCommon{scrlttr2}{\EndIndex{}{Fussnoten=Fußnoten}}
\fi %**************************************************** Ende nur maincls *


%%% Local Variables:
%%% mode: latex
%%% coding: iso-latin-1
%%% TeX-master: "../guide"
%%% End:

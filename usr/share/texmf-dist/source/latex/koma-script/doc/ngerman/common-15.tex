% ======================================================================
% common-15.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% This file is part of the LaTeX2e KOMA-Script bundle.
%
% This work may be distributed and/or modified under the conditions of
% the LaTeX Project Public License, version 1.3c of the license.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX 
% version 2005/12/01 or later and of this work.
%
% This work has the LPPL maintenance status "author-maintained".
%
% The Current Maintainer and author of this work is Markus Kohm.
%
% This work consists of all files listed in manifest.txt.
% ----------------------------------------------------------------------
% common-15.tex
% Copyright (c) Markus Kohm, 2001-2012
%
% Dieses Werk darf nach den Bedingungen der LaTeX Project Public Lizenz,
% Version 1.3c, verteilt und/oder veraendert werden.
% Die neuste Version dieser Lizenz ist
%   http://www.latex-project.org/lppl.txt
% und Version 1.3c ist Teil aller Verteilungen von LaTeX
% Version 2005/12/01 oder spaeter und dieses Werks.
%
% Dieses Werk hat den LPPL-Verwaltungs-Status "author-maintained"
% (allein durch den Autor verwaltet).
%
% Der Aktuelle Verwalter und Autor dieses Werkes ist Markus Kohm.
% 
% Dieses Werk besteht aus den in manifest.txt aufgefuehrten Dateien.
% ======================================================================
%
% Paragraphs that are common for several chapters of the KOMA-Script guide
% Maintained by Markus Kohm
%
% ----------------------------------------------------------------------
%
% Absätze, die mehreren Kapiteln der KOMA-Script-Anleitung gemeinsam sind
% Verwaltet von Markus Kohm
%
% ======================================================================

\ProvidesFile{common-15.tex}[2011/09/21 KOMA-Script guide (common paragraphs)]

\makeatletter
\@ifundefined{ifCommonmaincls}{\newif\ifCommonmaincls}{}%
\@ifundefined{ifCommonscrextend}{\newif\ifCommonscrextend}{}%
\@ifundefined{ifCommonscrlttr}{\newif\ifCommonscrlttr}{}%
\@ifundefined{ifIgnoreThis}{\newif\ifIgnoreThis}{}%
\makeatother


\section{Schlauer Spruch}
\label{sec:\csname label@base\endcsname.dictum}%
\ifshortversion\IgnoreThisfalse\IfNotCommon{maincls}{\IgnoreThistrue}\fi%
\ifIgnoreThis %+++++++++++++++++++++++++++++++++++++++++++++ nicht maincls +
Es gilt sinngemäß, was in \autoref{sec:maincls.dictum} geschrieben
wurde. \IfCommon{scrextend}{Allerdings werden von \Package{scrextend} die
  Anweisungen \Macro{setchapterpreamble} und \Macro{setpartpreamble} nicht
  definiert. Ob die verwendete Klasse eine entsprechende Anweisung bietet, ist
  der Anleitung zur jeweiligen Klasse zu entnehmen.}
\else %------------------------------------------------------- nur maincls -
\BeginIndex{}{Spruch}%
\BeginIndex{}{Zitat}%
\BeginIndex{}{Redewendung}%

Ein häufiger anzutreffendes Element ist ein Zitat oder eine Redewendung, die
rechtsbündig unter oder über einer Überschrift gesetzt wird. Dabei werden der
Spruch selbst und der Quellennachweis in der Regel speziell formatiert.


\begin{Declaration}
  \Macro{dictum}\OParameter{Urheber}\Parameter{Spruch}\\
  \Macro{dictumwidth}\\
  \Macro{dictumauthorformat}\Parameter{Urheber}\\
  \Macro{dictumrule}\\
  \Macro{raggeddictum}\\
  \Macro{raggeddictumtext}\\
  \Macro{raggeddictumauthor}
\end{Declaration}%
\BeginIndex{Cmd}{dictum}%
\BeginIndex{Cmd}{dictumwidth}%
\BeginIndex{Cmd}{dictumauthorformat}%
\BeginIndex{Cmd}{dictumrule}%
\BeginIndex{Cmd}{raggeddictum}%
\BeginIndex{Cmd}{raggeddictumtext}%
\BeginIndex{Cmd}{raggeddictumauthor}%
Ein solcher Spruch kann mit Hilfe der Anweisung \Macro{dictum} gesetzt werden.
\IfCommon{maincls}{Bei\textnote{Tipp!} \KOMAScript-Klassen wird für Kapitel
  oder Teile empfohlen, \Macro{dictum} als obligatorisches Argument der
  Anweisung \Macro{setchapterpreamble} beziehungsweise \Macro{setpartpreamble}
  (siehe \autoref{sec:maincls.structure},
  \autopageref{desc:maincls.cmd.setchapterpreamble}) zu verwenden. Dies ist
  jedoch nicht zwingend.\par}%
Der Spruch wird\IfCommon{scrextend}{ hierzu} zusammen mit einem optional anzugebenden \PName{Urheber} in
einer \Macro{parbox}\IndexCmd{parbox} (siehe \cite{latex:usrguide}) der Breite
\Macro{dictumwidth} gesetzt. Dabei ist \Macro{dictumwidth} keine Länge, die
mit \Macro{setlength} gesetzt wird. Es handelt sich um ein Makro, das mit
\Macro{renewcommand} umdefiniert werden kann. Vordefiniert ist
\lstinline;0.3333\textwidth;, also ein Drittel der jeweiligen Textbreite. Die
Box selbst wird mit der Anweisung \Macro{raggeddictum}
ausgerichtet. Voreingestellt ist dabei
\Macro{raggedleft}\IndexCmd{raggedleft}, also rechtsbündig.
\Macro{raggeddictum} kann mit Hilfe von \Macro{renewcommand} umdefiniert
werden.

Innerhalb der Box wird der \PName{Spruch} mit \Macro{raggeddictumtext}
angeordnet. Voreingestellt ist hier \Macro{raggedright}\IndexCmd{raggedright},
also linksbündig. Eine Umdefinierung ist auch hier mit \Macro{renewcommand}
möglich. Die Ausgabe erfolgt in der für Element
\FontElement{dictumtext}\IndexFontElement[indexmain]{dictumtext}%
\important{\FontElement{dictumtext}} eingestellten Schriftart, die mit den
Anweisungen \Macro{setkomafont} und \Macro{addtokomafont} (siehe
\autoref{sec:\csname label@base\endcsname.textmarkup},
\autopageref{desc:\csname label@base\endcsname.cmd.setkomafont}) geändert
werden kann. Die Voreinstellung entnehmen Sie bitte
\autoref{tab:maincls.dictumfont}%
\IfNotCommon{maincls}{, \autopageref{tab:maincls.dictumfont}}%
.

\ifCommonmaincls
\begin{table}
%  \centering%
%  \caption
  \KOMAoptions{captions=topbeside}%
  \setcapindent{0pt}%
  \begin{captionbeside}
    [{Schriftvoreinstellungen für die Elemente des
      Spruchs}]
    {\label{tab:maincls.dictumfont}\hspace{0pt plus 1ex}%
      Voreinstel\-lungen der Schrift für die Elemente des Spruchs}
    [l]
  \begin{tabular}[t]{ll}
    \toprule
    Element & Voreinstellung \\
    \midrule
    \FontElement{dictumtext} & 
    \Macro{normalfont}\Macro{normalcolor}\Macro{sffamily}\Macro{small}\\
    \FontElement{dictumauthor} &
    \Macro{itshape}\\
    \bottomrule
  \end{tabular}
  \end{captionbeside}
\end{table}
\fi

Ist ein \PName{Urheber} angegeben, so wird dieser mit einer Linie über die
gesamte Breite der \Macro{parbox} vom \PName{Spruch} abgetrennt.
Diese\IfCommon{maincls}{\ChangedAt{v3.10}{\Class{scrbook}\and
    \Class{scrreprt}\and \Class{scrartcl}}}%
\IfCommon{scrextend}{\ChangedAt{v3.10}{\Package{scrextend}}} Linie ist in
\Macro{dictumrule} definiert. Es handelt sich dabei um ein vertikales Objekt,
das mit
% Satzkorrektur listings
\begin{lstcode}[belowskip=\dp\strutbox]
  \newcommand*{\dictumrule}{\vskip-1ex\hrulefill\par}
\end{lstcode}
vordefiniert ist.

Mit \Macro{raggeddictumauthor} wird die Ausrichtung für die Linie und den
Urheber vorgenommen.  Voreingestellt ist \Macro{raggedleft}. Auch diese
Anweisung kann mit \Macro{renewcommand} umdefiniert werden. Die Ausgabe
erfolgt in der Form, die mit \Macro{dictumauthorformat} festgelegt ist. Das
Makro erwartet schlicht den \Macro{Urheber} als Argument. In der
Voreinstellung ist \Macro{dictumauthorformat} als
% Satzkorrektur listings
\begin{lstcode}[belowskip=\dp\strutbox]
  \newcommand*{\dictumauthorformat}[1]{(#1)}
\end{lstcode}
definiert. Der \PName{Urheber} wird also in runde Klammern gesetzt. Für das
Element \FontElement{dictumauthor}\IndexFontElement[indexmain]{dictumauthor}%
\important{\FontElement{dictumauthor}} kann dabei eine Abweichung der Schrift
von der des Elementes
\FontElement{dictumtext}\IndexFontElement[indexmain]{dictumtext}%
\important{\FontElement{dictumtext}} definiert werden. Die Voreinstellung
entnehmen Sie bitte \autoref{tab:maincls.dictumfont}. Eine Änderung ist mit
Hilfe der Anweisungen \Macro{setkomafont} und \Macro{addtokomafont} (siehe
\autoref{sec:\csname label@base\endcsname.textmarkup},
\autopageref{desc:\csname label@base\endcsname.cmd.setkomafont}) möglich.%
%
\ifCommonmaincls

Wird \Macro{dictum} innerhalb der Anweisung \Macro{setchapterpreamble} oder
\Macro{setpartpreamble} (siehe \autoref{sec:maincls.structure},
\autopageref{desc:maincls.cmd.setchapterpreamble}) verwendet, so ist Folgendes
zu beachten:\textnote{Achtung!} Die horizontale Anordnung erfolgt immer mit
\Macro{raggeddictum}. Das optionale Argument zur horizontalen Anordnung, das
die beiden Anweisungen vorsehen, bleibt daher ohne Wirkung. \Macro{textwidth}
ist nicht die Breite des gesamten Textkörpers, sondern wie bei
\Environment{minipage} die aktuelle Textbreite. Ist also die Breite
\Macro{dictumwidth} als \lstinline;.5\textwidth; definiert und bei
\Macro{setchapterpreamble} wird als optionales Argument für die Breite
ebenfalls \lstinline;.5\textwidth; angegeben, so erfolgt die Ausgabe in einer
Box, deren Breite ein Viertel der Breite des Textkörpers ist. Es wird
empfohlen\textnote{Tipp!}, bei Verwendung von \Macro{dictum} auf die
optionale Angabe einer Breite bei \Macro{setchapterpreamble} oder
\Macro{setpartpreamble} zu verzichten.

Sollen\textnote{Tipp!} mehrere schlaue Sprüche untereinander gesetzt werden,
so sollten diese durch einen zusätzlichen Abstand vertikal voneinander
abgesetzt werden. Ein solcher kann leicht mit der Anweisung
\Macro{bigskip}\IndexCmd{bigskip} gesetzt werden.

\begin{Example}
  Sie schreiben ein Kapitel über die moderne Ehe. Dabei wollen sie in der
  Präambel zur Kapitelüberschrift einen schlauen Spruch setzen. Dieser soll
  unter der Überschrift erscheinen. Also schreiben Sie:
\begin{lstcode}
  \setchapterpreamble[u]{%
    \dictum[Schiller]{Drum prüfe, 
      wer sich ewig bindet \dots}}
  \chapter{Die moderne Ehe}
\end{lstcode}
  Die Ausgabe erfolgt dann in der Form:
  \begin{ShowOutput}
    {\usekomafont{disposition}\usekomafont{chapter}\Large
      17\enskip Die moderne Ehe\raggedright\par}
    \vspace{\baselineskip}
    \dictum[Schiller]{Drum prüfe, wer sich ewig bindet~\dots}
  \end{ShowOutput}

  Wenn Sie wollen, dass nicht ein Drittel, sondern nur ein Viertel der
  verfügbaren Textbreite für den Spruch verwendet wird, so definieren Sie
  \Macro{dictumwidth} wie folgt um:
\begin{lstcode}
  \renewcommand*{\dictumwidth}{.25\textwidth}
\end{lstcode}
\end{Example}

An dieser Stelle sei noch auf das Paket~\cite{package:ragged2e} hingewiesen,
mit dem man Flattersatz mit Trennung erreichen kann.%
\fi
%
\EndIndex{Cmd}{dictum}%
\EndIndex{Cmd}{dictumwidth}%
\EndIndex{Cmd}{dictumauthorformat}%
\EndIndex{Cmd}{dictumrule}%
\EndIndex{Cmd}{raggeddictum}%
\EndIndex{Cmd}{raggeddictumtext}%
\EndIndex{Cmd}{raggeddictumauthor}%
%
\EndIndex{}{Redewendung}%
\EndIndex{}{Zitat}%
\EndIndex{}{Spruch}%
\fi  %**************************************************** Ende nur maincls *


%%% Local Variables:
%%% mode: latex
%%% coding: iso-latin-1
%%% TeX-master: "../guide"
%%% End:
